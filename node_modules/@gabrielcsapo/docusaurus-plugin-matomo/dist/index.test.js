"use strict";
var plugin = require("./index");
describe("docusaurus-plugin-matomo", function () {
    test("should handle not passing in any options", function () {
        expect(function () {
            plugin({ siteConfig: { themeConfig: {} } });
        }).toThrowErrorMatchingInlineSnapshot("\"You need to specify options arguments use docusaurus-plugin-matomo.\"");
    });
    test("should be able to render out the right header information given the base matomo options", function () {
        process.env.NODE_ENV = "production";
        expect(plugin({
            siteConfig: {
                themeConfig: {}
            }
        }, {
            siteId: "TEST_SITE_ID",
            matomoUrl: "TEST_MATOMO_URL",
            siteUrl: "TEST_SITE_URL"
        }).injectHtmlTags()).toMatchInlineSnapshot("\nObject {\n  \"headTags\": Array [\n    Object {\n      \"attributes\": Object {\n        \"href\": \"TEST_MATOMO_URL/piwik.js\",\n        \"rel\": \"preconnect\",\n      },\n      \"tagName\": \"link\",\n    },\n    Object {\n      \"innerHTML\": \"\n            var img = document.createElement('img');\n            img.src = \\\"TEST_MATOMO_URL/piwik.php?idsite=TEST_SITE_ID&rec=1&url=TEST_SITE_URL\\\" + location.pathname;\n            img.style = \\\"border:0\\\";\n            img.alt = \\\"tracker\\\";\n\n            var s = document.getElementsByTagName('script')[0];\n            s.parentNode.insertBefore(img,s);\n            \",\n      \"tagName\": \"noscript\",\n    },\n    Object {\n      \"innerHTML\": \"\n            window.dev = undefined\n            if (window.dev === true || !(navigator.doNotTrack === '1' || window.doNotTrack === '1')) {\n              window._paq = window._paq || [];\n              \n              \n              \n              \n              \n              window._paq.push(['setTrackerUrl', 'TEST_MATOMO_URL/piwik.php']);\n              window._paq.push(['setSiteId', 'TEST_SITE_ID']);\n              window._paq.push(['enableHeartBeatTimer']);\n              window.start = new Date();\n              (function() {\n                var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];\n                g.type='text/javascript'; g.async=true; g.defer=true; g.src='TEST_MATOMO_URL/piwik.js'; s.parentNode.insertBefore(g,s);\n              })();\n              if (window.dev === true) {\n                console.debug('[Matomo] Tracking initialized')\n                console.debug('[Matomo] matomoUrl: TEST_MATOMO_URL, siteId: TEST_SITE_ID')\n              }\n            }\n            \",\n      \"tagName\": \"script\",\n    },\n  ],\n}\n");
    });
});
